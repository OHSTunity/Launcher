<!doctype html>
<head>
    <title>Launcher</title>
    <!-- Import Polymer platform -->
    <script src="/vendor/platform/platform.js"></script>    
    <link rel="import" href="/vendor/polymer/polymer.html">

    <!-- Import our elements -->
    <link rel="import" href="/elements/launcher-layout/launcher-main.html">
    <link rel="import" href="/elements/launcher-partial/launcher-partial.html">
    <link rel="import" href="/elements/launcher-partial/launcher-root-partial.html">

    <!-- Import other elements used in this document -->


    <link rel="import" href="/vendor/core-icon/core-icon.html">
    <link rel="import" href="/vendor/core-icon-button/core-icon-button.html">
    <link rel="import" href="/vendor/paper-toggle-button/paper-toggle-button.html">
    <link rel="import" href="/vendor/core-field/core-field.html">

    <link rel="import" href="/vendor/puppet-js/src/puppet-js.html">
    <link rel="import" href="/vendor/imported-template/imported-template.html">
    <link rel="import" href="/vendor/model-operations/model-operations.html">
    <link rel="import" href="/vendor/juicy-tile-editor/src/juicy-tile-editor.html">
    <link rel="import" href="/vendor/warpech-display-router/warpech-display-router.html">
    <link rel="import" href="/vendor/x-html/juicy-html.html">

    <!-- Style sheets -->
    <link rel="stylesheet" href="/css/style.css">

<!--    <link rel="stylesheet" href="/css/fontello.css">
    <link rel="stylesheet" href="/css/animation.css">-->

    <link rel="stylesheet" href="/css/launcher-main.css">
    <link rel="stylesheet" href="/css/launcher-menu.css">
    <link rel="stylesheet" href="/css/launcher-button.css">
    <link rel="stylesheet" href="/css/launcher-labeledInput.css">
    <link rel="stylesheet" href="/css/launcher-select.css">
    <link rel="stylesheet" href="/css/launcher-toolbar.css">

    <!-- Others -->
    <script src="/vendor/css-element-queries/src/ElementQueries.js"></script>
    <script src="/vendor/css-element-queries/src/ResizeSensor.js"></script>


</head>

<body is="launcher-main">
  <template id="root" bind>
      <div class="launcher-toolbar launcher-topbar">
          <a href="/"><img id="homeIcon" src="/images/elusive-iconfont/dev/icons-svg/home.svg"></a>
          <core-field class="launcher-theme">
              <core-icon icon="search"></core-icon>
              <input placeholder="Search" value="{{searchBar.query$}}" update-on="input"/>
          </core-field>
          <template bind="{{user}}">
              <template is="imported-template" content="{{ Html }}"></template>
          </template>

          <!--<core-icon-button id="account" icon="account"></core-icon-button>-->
          <core-icon-button id="settings" active="{{editingMode$}}" icon="settings" onclick="getModel(this).editingMode$ = !getModel(this).editingMode$" ></core-icon-button>
      </div>

      <template if="{{editingMode$}}">
        <div id="elementSettings" class="launcher-topbar">
          <juicy-tile-editor selectionMode watchedTagNames="['JUICY-TILE-LIST', 'JUICY-TILE-GRID']"></juicy-tile-editor>
        </div>
      </template>

      <div id="launcher-menu">
        <ul>
          <template bind="{{ menu }}">
              <template is="imported-template" content="{{ Html }}"></template>
          </template>
          <li><a href="/do-nothing">Do nothing</a></li>
        </ul>
      </div>

      <div id="launcher-content">
          <!-- Launchpad -->
          Launchpad
          <template is="juicy-html" content="/app-name"></template>
          <template is="juicy-html" content="/app-icon"></template>
          merger:<template is="imported-template" content="{{launchpad.icons.Html}}"></template>

          <template bind="{{launchpad.icons}}">
              <juicy-tile-grid 
                  id="juicy-tile:{{Html}}" 
                  defaultTileSetup="{
                      'height': 66,
                      'width': 66
                  }"
                  gutter="20"
                  class="launchpad">
                  <style>
                  .launchpad{
                    width: 100%;
                    display: block;
                  }

                  .launchpad > *{
                    padding: 2px;
                    border-radius: 13px;
                  }
                  .launchpad > *:hover {
                    box-shadow: inset 0px 0px 10px rgba(138, 152, 176,0.8);

                  }
                  </style>
                 <template is="imported-template" content="{{Html}}"></template>
              </juicy-tile-grid>
          </template>
          <!-- <launcher-root-partial -->
            <!-- class="workspace launcher" bind="{{ results }}"></launcher-root-partial> -->
            <!-- just "/" or whatever starting from "/launcher/.." except stuff starting from "/launcher/workspace" -->

          <!-- Dashboard/results -->
          <launcher-root-partial
            class="workspace launcher" bind="{{ results }}"></launcher-root-partial>
            <!-- just "/" or whatever starting from "/launcher/.." except stuff starting from "/launcher/workspace" -->
          <warpech-display-route match-path="^\/$|(\/launcher\/(?!workspace))" display-selector=".workspace.launcher"></warpech-display-route>
                
          <!-- Workspaces -->
          <template repeat="{{ workspaces }}">
              <!-- - workspace -->
              <warpech-display-route match-path="^\/launcher\/workspace\/{{appName}}" display-selector=".workspace.{{appName}}"></warpech-display-route>
              <launcher-root-partial
                class="workspace {{appName}}" bind="{{master}}"></launcher-root-partial>
          </template>


      </div>
      <div id="filters">
          <h2>Filter</h2>
          <template repeat="{{ appFilter }}">
              <core-field class="align-center">
                  <paper-toggle-button class="launcher-theme" role="button" aria-pressed="true" tabindex="0" checked="{{on$}}"></paper-toggle-button>
                  <label>{{appName}}</label>
              </core-field>
          </template>
      </div>
  </template>
  <puppet-js ref="root" ignoreadd="/_setup" useWebSocket></puppet-js>
</body>
