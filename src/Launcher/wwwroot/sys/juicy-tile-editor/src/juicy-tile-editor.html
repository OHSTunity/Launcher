<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../juicy-highlight/src/juicy-highlight.html">
<link rel="import" href="juicy-tile-editor-form.html">
<link rel="import" href="juicy-tile-tree.html">
<link rel="import" href="juicy-draggable.html" />

<polymer-element name="juicy-tile-editor" attributes="selectionMode">
  <template>
    <style>
        .sidebar {
            position: fixed;
            width: 220px;
            border: 1px solid #333333;
            overflow: auto;
            padding:0px 5px;
            height:220px;
            background-color:#404040;
            color:#F0F0F0;
        }

        .sidebar h1 {
            cursor: move;
        }

        :host.max-height .sidebar {
            top: 35px;
        }

        .sidebar.left {
            left:0px;
            top: 59px;
            height: calc(100% - 60px);
        }

        .sidebar.right {
            right:0px;
            top: 59px;
            height: calc(100% - 60px);
        }

        .sidebar.top {
            height:150px;
            top:0px;
            left:0px;
            width: calc(100% - 5px);
        }

        .sidebar.bottom {
            top:initial;
            height:150px;
            bottom:0px;
            left:0px;
            width: calc(100% - 5px);
        }

        .sidebar.left-top {
            left:0px;
            width:220px;
            height:220px;
            top:0px;
        }

        .sidebar.right-top {
            left:initial;
            right:0px;
            width:220px;
            height:220px;
            top:0px;
        }

        .sidebar.left-bottom {
            left:0px;
            width:220px;
            height:220px;
            bottom:0px;
            top:initial;
        }

        .sidebar.right-bottom {
            left:initial;
            right:5px;
            width:220px;
            height:220px;
            bottom:5px;
            top:initial;
        }

        .sidebar /deep/ #menu {
            margin-left: 10px;
        }

        .sidebar h1 {
            margin: 5px 0px 0px 0px;
            font-size: 20px;
        }

        .sidebar .actions {
            float:right;
            margin: 7px 0px 0px 0px;
        }

        .sidebar .actions a {
            text-decoration:none;
            color:#7f899c;
            display:block;
            width:25px;
            height:25px;
            text-align:center;
            line-height:25px;
            background-color:#F0F0F0;
        }

        .sidebar .actions a:hover {
            color:#333333;
        }
    </style>

    <juicy-tile-editor-form id="form"
      selectedItems="{{selectedItems}}" 
      editedTiles="{{editedTiles}}"
      on-juicy-tile-editor-revert="{{revertAction}}"
      on-juicy-tile-editor-form-tree-changed="{{treeChangedAction}}"></juicy-tile-editor-form>

      <juicy-draggable elementid="sidebar" handleid="sidebarHeader" position="fixed" id="sidebarDrag">
          <div class="sidebar left" id="sidebar">
              <span class="actions">
                  <a href="javascript:" title="Move to next position" on-click="{{moveToNextPosition}}">⇔</a>
              </span>
              <h1 id="sidebarHeader">
                  Elements
              </h1>
              <juicy-tile-tree id="treeView" tree="{{ tree }}"
                            on-juicy-tile-tree-highlight="{{treeHighlightAction}}"
                            on-juicy-tile-tree-highlight-extend="{{treeHighlightExtendAction}}"
                            on-juicy-tile-tree-highlight-remove="{{treeHighlightRemoveAction}}"
                            on-juicy-tile-tree-refresh-tile-list="{{refreshTileList}}"
                            on-juicy-tile-tree-hover="{{treeHoverAction}}"
                            on-juicy-tile-tree-blur="{{treeBlurAction}}"
                            on-juicy-tile-tree-drag-item-stop="{{treeItemDragStop}}"></juicy-tile-tree>
          </div>
      </juicy-draggable>

    <juicy-highlight id="tileEdited" strokeWidth="2" strokeColor="#fd7f02" strokeOffset="2" fill="rgba(253, 127, 2, 0.1)"></juicy-highlight>
    <juicy-highlight id="tileRollover" strokeWidth="1" strokeColor="#1E90FF" strokeOffset="2" fill="rgba(0,191,255, 0.2)"></juicy-highlight>
    <juicy-highlight id="tileSelected" strokeWidth="1" strokeColor="#fd7f02" strokeOffset="2"></juicy-highlight>
  </template>
  <script src="juicy-tile-editor.js"></script>
</polymer-element>
